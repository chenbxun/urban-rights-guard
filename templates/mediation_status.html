{% extends "base.html" %}

{% block content %}
<div class="row mt-4">

    <div class="col-md-3 mb-4">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-primary text-white fw-bold py-3">
                âš–ï¸ è°ƒè§£æœåŠ¡å¤§å…
            </div>
            <div class="list-group list-group-flush">
                <a href="/mediation/apply" class="list-group-item list-group-item-action py-3 d-flex justify-content-between align-items-center">
                    å¿«é€Ÿè°ƒè§£å…¥å£
                    <span class="badge bg-danger rounded-pill">Hot</span>
                </a>
                <a href="/mediation/status" class="list-group-item list-group-item-action py-3 sidebar-active">
                    çº çº·è°ƒè§£è¿›åº¦æŸ¥è¯¢
                </a>
                <a href="/mediation/upload" class="list-group-item list-group-item-action py-3">
                    å½•åƒ/å½•éŸ³ä¸Šä¼ 
                </a>
                <a href="/mediation/download" class="list-group-item list-group-item-action py-3">
                    å½•åƒ/å½•éŸ³ä¸‹è½½
                </a>
                <a href="/mediation/hotline" class="list-group-item list-group-item-action py-3 text-muted">
                    <small>24å°æ—¶äººå·¥çƒ­çº¿</small>
                </a>
            </div>
        </div>

        <div class="alert alert-info mt-3 shadow-sm border-0 small">
            <i class="bi bi-info-circle-fill"></i> æç¤ºï¼š
            ä¸Šä¼ å½•éŸ³å½•åƒå‰ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼ä¸º MP3 æˆ– MP4ï¼Œå¤§å°ä¸è¶…è¿‡ 500Mã€‚
        </div>
    </div>

    <div class="col-md-9">
        <div class="card shadow border-0">
            <div class="card-header bg-white border-bottom py-3 d-flex justify-content-between align-items-center">
                <h4 class="fw-bold text-primary mb-0">ğŸ” æ¡ˆä»¶è¿›åº¦æŸ¥è¯¢</h4>
                <a href="/mediation" class="btn btn-outline-secondary btn-sm">
                    &lt; è¿”å›ä¸“å®¶åˆ—è¡¨
                </a>
            </div>
            <div class="card-body p-5">
                
                <form method="post" action="/mediation/status" class="mb-5">
                    <div class="row g-3 align-items-center justify-content-center">
                        <div class="col-auto">
                            <label class="col-form-label fw-bold">ç”³è¯·æ‰‹æœºå·ï¼š</label>
                        </div>
                        <div class="col-auto">
                            <input type="text" name="phone" class="form-control form-control-lg" placeholder="è¯·è¾“å…¥æäº¤æ—¶çš„æ‰‹æœºå·" value="{{ query_phone }}">
                        </div>
                        <div class="col-auto">
                            <button type="submit" class="btn btn-primary btn-lg">æŸ¥è¯¢è¿›åº¦</button>
                        </div>
                    </div>
                </form>

                <hr>

                {% if has_searched %}
                    <h5 class="fw-bold mb-3">æŸ¥è¯¢ç»“æœï¼š</h5>
                    
                    {% if results %}
                        <div class="list-group">
                            {% for item in results %}
                            <div class="list-group-item list-group-item-action border-0 shadow-sm mb-3 rounded bg-light">
                                <div class="d-flex w-100 justify-content-between align-items-center border-bottom pb-2 mb-2">
                                    <h5 class="mb-1 text-dark fw-bold">{{ item.dispute_type_text }}çº çº·</h5>
                                    <small class="text-muted">{{ item.submit_time }}</small>
                                </div>
                                <p class="mb-1"><strong>ç”³è¯·äººï¼š</strong> {{ item.name }}</p>
                                <p class="mb-1"><strong>æè¿°æ‘˜è¦ï¼š</strong> {{ item.description[:50] }}...</p>
                                
                                <div class="mt-3">
                                    <strong>å½“å‰çŠ¶æ€ï¼š</strong>
                                    <span class="badge bg-warning text-dark">
                                        <i class="bi bi-hourglass-split"></i> ä¸“å®¶å®¡æ ¸ä¸­
                                    </span>
                                    <span class="ms-2 text-muted small">é¢„è®¡ 3 ä¸ªå·¥ä½œæ—¥å†…ä¼šæœ‰ä¸“å‘˜è”ç³»æ‚¨</span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="alert alert-warning text-center" role="alert">
                            æœªæ‰¾åˆ°è¯¥æ‰‹æœºå·å…³è”çš„ç”³è¯·è®°å½•ï¼Œè¯·æ ¸å¯¹åé‡è¯•ã€‚
                        </div>
                    {% endif %}
                
                {% else %}
                    <div class="text-center text-muted py-5">
                        <p class="mb-0">è¯·è¾“å…¥æ‰‹æœºå·æŸ¥è¯¢æ‚¨çš„æ¡ˆä»¶å¤„ç†è¿›åº¦...</p>
                    </div>
                {% endif %}

            </div>
        </div>
    </div>
</div>

<style>
    .sidebar-active {
        background-color: #fff !important;
        color: #0d6efd !important;
        font-weight: bold;
        border-left: 5px solid #0d6efd !important;
        padding-left: 15px !important;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
</style>
{% endblock %}